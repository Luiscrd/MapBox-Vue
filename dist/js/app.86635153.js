(function(){"use strict";var e=[,function(e,n,t){var a=t(963),o=t(252),r=t.p+"img/logo2.646b33de.png";const i=(0,o._)("img",{src:r,alt:"Logo Vue",class:"logo"},null,-1);function c(e,n){const t=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(t),i],64)}var u=t(744);const s={},l=(0,u.Z)(s,[["render",c]]);var d=l,p=t(201);function f(e,n,t,a,r,i){var c=(0,o.up)("MapView"),u=(0,o.up)("MyLocationBtn"),s=(0,o.up)("TripDetails"),l=(0,o.up)("SearchBar");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(c),(0,o.Wm)(u),(0,o.Wm)(s),(0,o.Wm)(l)],64)}var v=t(907),m=function(){var e=(0,v.oR)();return(0,o.bv)((function(){e.getters["places/isUseLocationReady"]||e.dispatch("places/getInitialLocation")})),{isLoaading:(0,o.Fl)((function(){return e.state.places.isLoading})),userLocation:(0,o.Fl)((function(){return e.state.places.useLocation})),places:(0,o.Fl)((function(){return e.state.places.places})),isLoadingPlaces:(0,o.Fl)((function(){return e.state.places.isLoading})),isUseLocationReady:(0,o.Fl)((function(){return e.getters["places/isUseLocationReady"]})),SearchPlacesByTerm:function(n){return void 0===n&&(n=""),e.dispatch("places/SearchPlacesByTerm",n)}}},g=function(e){return(0,o.dD)("data-v-b9addc64"),e=e(),(0,o.Cn)(),e},h={key:0,class:"loading-map d-flex justify-content-center align-items-center"},y=g((function(){return(0,o._)("div",{class:"text-center"},[(0,o._)("h3",null,"Espere por favor"),(0,o._)("span",null,"Localizando...")],-1)})),L=[y],b={class:"map-container",ref:"mapElemnt"};function w(e,n,t,r,i,c){return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.isUseLocationReady?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",h,L)),(0,o.wy)((0,o._)("div",b,null,512),[[a.F8,e.isUseLocationReady]])],64)}var k=t(655),P=function(){var e=(0,v.oR)();return{map:(0,o.Fl)((function(){return e.state.map.map})),markers:(0,o.Fl)((function(){return e.state.map.markers})),distance:(0,o.Fl)((function(){return e.state.map.distance})),duration:(0,o.Fl)((function(){return e.state.map.duration})),isMapReady:(0,o.Fl)((function(){return e.getters["map/isMapReady"]})),setMap:function(n){return e.commit("map/setMap",n)},setPlaceMarkers:function(n){return e.commit("map/setPlaceMarkers",n)},getRoteBetweenOints:function(n,t){return e.dispatch("map/getRoteBetweenOints",{start:n,end:t})}}},_=t(158),M=t.n(_),R=t(262),D=(0,o.aZ)({name:"MapView",setup:function(){var e=this,n=(0,R.iH)(),t=m(),a=t.userLocation,r=t.isUseLocationReady,i=P().setMap,c=function(){return(0,k.mG)(e,void 0,void 0,(function(){var e,t;return(0,k.Jh)(this,(function(o){switch(o.label){case 0:if(!n.value)throw new Error("Div Element no existe");if(!a.value)throw new Error("User Location no existe");return[4,Promise.resolve()];case 1:return o.sent(),e=new(M().Map)({container:n.value,style:"mapbox://styles/mapbox/streets-v11",center:a.value,zoom:16}),t=new(M().Popup)({offset:[0,-25]}).setLngLat(a.value).setHTML("\n      <h4>Aquí estoy</h4>\n      <p>Actualmente en San Martín</p>\n      <p>".concat(a.value,"</p>\n      ")),new(M().Marker)({color:"#0D6EFD",draggable:!0}).setLngLat(a.value).setPopup(t).addTo(e),e.on("style.load",(function(){e.setFog({})})),i(e),[2]}}))}))};return(0,o.bv)((function(){if(r.value)return c()})),(0,o.YP)(r,(function(e){r.value&&c()})),{userLocation:a,isUseLocationReady:r,mapElemnt:n}}});const T=(0,u.Z)(D,[["render",w],["__scopeId","data-v-b9addc64"]]);var B=T;function E(e,n,t,a,r,i){return e.isBtnReady?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:n[0]||(n[0]=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.onMyLocationClick&&e.onMyLocationClick.apply(e,n)}),class:"btn btn-primary"},"Ir a mi hubicación")):(0,o.kq)("",!0)}var S=(0,o.aZ)({name:"MyLocationBtn",setup:function(){var e=m(),n=e.userLocation,t=e.isUseLocationReady,a=P(),r=a.map,i=a.isMapReady;return{isBtnReady:(0,o.Fl)((function(){return t.value&&i.value})),onMyLocationClick:function(){var e;null===(e=r.value)||void 0===e||e.flyTo({center:n.value,zoom:16})}}}});const O=(0,u.Z)(S,[["render",E],["__scopeId","data-v-703eb758"]]);var x=O,j={class:"searchbar-container"};function C(e,n,t,r,i,c){var u=(0,o.up)("SearchResults");return(0,o.wg)(),(0,o.iD)("div",j,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"Buscar lugares...","onUpdate:modelValue":n[0]||(n[0]=function(n){return e.searchTerm=n})},null,512),[[a.nr,e.searchTerm]]),(0,o.Wm)(u)])}var F=t(577),U=function(e){return(0,o.dD)("data-v-6d34ecfa"),e=e(),(0,o.Cn)(),e},I={key:0,class:"loading-map d-flex justify-content-center align-items-center"},N=U((function(){return(0,o._)("div",{class:"text-center"},[(0,o._)("h3",null,"Espere por favor"),(0,o._)("span",null,"Cargando Busqueda...")],-1)})),z=[N],Z={key:1,class:"list-group mt-3"},H=["onClick"],A=["onClick"];function V(e,n,t,r,i,c){return e.isLoadingPlaces?((0,o.wg)(),(0,o.iD)("div",I,z)):e.places.length>0?((0,o.wg)(),(0,o.iD)("ul",Z,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.places,(function(n){return(0,o.wg)(),(0,o.iD)("li",{key:n.id,onClick:function(t){return e.onPlaceClick(n)},class:(0,F.C_)(["list-group-item list-group-item-action",n.id===e.activePlace?"active":""])},[(0,o._)("h5",null,(0,F.zw)(n.text),1),(0,o._)("p",null,(0,F.zw)(e.cutTextPlace(n.place_name)),1),(0,o._)("button",{class:(0,F.C_)(["btn",n.id===e.activePlace?"btn-outline-light":"btn-outline-primary"]),onClick:(0,a.iM)((function(t){return e.getRouteDirections(n)}),["self"])},"Direcciones",10,A)],10,H)})),128))])):(0,o.kq)("",!0)}var Y=(0,o.aZ)({name:"SearchResults",setup:function(){var e=P(),n=e.map,t=e.setPlaceMarkers,a=e.getRoteBetweenOints,r=m(),i=r.isLoaading,c=r.places,u=r.isLoadingPlaces,s=r.isUseLocationReady,l=r.SearchPlacesByTerm,d=r.userLocation,p=function(e){return e.length>50?e.substring(0,50)+"...":e},f=(0,R.iH)("");return(0,o.YP)(c,(function(e){f.value="",t(e)})),{isLoaading:i,places:c,isLoadingPlaces:u,isUseLocationReady:s,SearchPlacesByTerm:l,cutTextPlace:p,activePlace:f,map:n,userLocation:d,onPlaceClick:function(e){var t;f.value=e.id;var a=e.center,o=a[0],r=a[1];null===(t=n.value)||void 0===t||t.flyTo({center:[o,r],zoom:16})},getRouteDirections:function(e){if(!d.value)throw alert("No se ha encontrado su localización"),Error("No se ha encontrado su localización");var n=e.center,t=n[0],o=n[1],r=d.value,i=r[0],c=r[1],u=[t,o],s=[i,c];a(u,s)}}}});const q=(0,u.Z)(Y,[["render",V],["__scopeId","data-v-6d34ecfa"]]);var W=q,G=(0,o.aZ)({name:"SearchBar",components:{SearchResults:W},setup:function(){var e=(0,R.iH)(),n=(0,R.iH)(),t=m().SearchPlacesByTerm;return{debounceValue:n,searchTerm:(0,o.Fl)({get:function(){return n.value},set:function(a){n.value&&clearTimeout(e.value),e.value=setTimeout((function(){n.value=a,t(a)}),2e3)}})}}});const J=(0,u.Z)(G,[["render",C],["__scopeId","data-v-b7e92824"]]);var K=J,X={key:0,class:"trip-container column"},Q={class:"col"},$=(0,o.Uk)("Distancia: "),ee={class:"col"},ne=(0,o.Uk)("Duración: ");function te(e,n,t,a,r,i){return e.distance&&e.duration?((0,o.wg)(),(0,o.iD)("div",X,[(0,o._)("div",Q,[$,(0,o._)("strong",null,(0,F.zw)(e.distance)+" Km",1)]),(0,o._)("div",ee,[ne,(0,o._)("strong",null,(0,F.zw)(e.duration)+" Minutos",1)])])):(0,o.kq)("",!0)}var ae=(0,o.aZ)({name:"TripDetails",setup:function(){var e=P(),n=e.distance,t=e.duration;return{distance:n,duration:t}}});const oe=(0,u.Z)(ae,[["render",te],["__scopeId","data-v-a8d87b54"]]);var re=oe,ie=(0,o.aZ)({name:"HomeView",components:{MapView:B,MyLocationBtn:x,SearchBar:K,TripDetails:re},setup:function(){m()}});const ce=(0,u.Z)(ie,[["render",f]]);var ue=ce,se=[{path:"/",name:"home",component:ue},{path:"/about",name:"about",component:function(){return t.e(443).then(t.bind(t,242))}}],le=(0,p.p7)({history:(0,p.r5)(),routes:se}),de=le;function pe(){return{isLoading:!0,useLocation:void 0,isLoadingPlaces:!1,places:[]}}var fe=pe,ve=t(669),me=t.n(ve),ge=me().create({baseURL:"https://api.mapbox.com/geocoding/v5/mapbox.places",params:{limit:5,language:"es",access_token:{NODE_ENV:"production",BASE_URL:"/"}.MAPBOX_KEY3}}),he=ge,ye=me().create({baseURL:"https://api.mapbox.com/directions/v5/mapbox/driving-traffic",params:{alternatives:!0,geometries:"geojson",language:"es",overview:"full",steps:!0,access_token:{NODE_ENV:"production",BASE_URL:"/"}.MAPBOX_KEY}}),Le=ye,be={getInitialLocation:function(e){var n=e.commit;navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;return n("setLngLat",{lng:t.longitude,lat:t.latitude})}),(function(e){throw console.error(e),new Error("No geolocation")}))},SearchPlacesByTerm:function(e,n){var t,a=e.commit,o=e.state;return(0,k.mG)(this,void 0,Promise,(function(){var e;return(0,k.Jh)(this,(function(r){switch(r.label){case 0:if(0===n.length)return a("setPlaces",[]),[2,[]];if(!o.useLocation)throw alert("No se encuentra la hubicación"),new Error("No se encuentra la hubicación");return a("setIsLoadingPlaces"),[4,he.get("/".concat(n,".json"),{params:{proximity:null===(t=o.useLocation)||void 0===t?void 0:t.join(",")}})];case 1:return e=r.sent(),a("setPlaces",e.data.features),[2,e.data.features]}}))}))}},we=be,ke={isUseLocationReady:function(e){return!!e.useLocation}},Pe=ke,_e={setLngLat:function(e,n){var t=n.lng,a=n.lat;e.useLocation=[t,a],e.isLoading=!1},setIsLoadingPlaces:function(e){e.isLoadingPlaces=!0},setPlaces:function(e,n){e.places=n,e.isLoadingPlaces=!1}},Me=_e,Re={namespaced:!0,actions:we,getters:Pe,mutations:Me,state:fe},De=Re;function Te(){return{map:void 0,markers:[],distance:void 0,duration:void 0}}var Be=Te,Ee={getRoteBetweenOints:function(e,n){var t=e.commit,a=n.start,o=n.end;return(0,k.mG)(this,void 0,void 0,(function(){var e;return(0,k.Jh)(this,(function(n){switch(n.label){case 0:return[4,Le.get("".concat(a.join(","),";").concat(o.join(",")))];case 1:return e=n.sent(),t("setDistanceDuration",{distance:e.data.routes[0].distance,duration:e.data.routes[0].duration}),t("setRoutePoyline",e.data.routes[0].geometry.coordinates),[2]}}))}))}},Se=Ee,Oe={isMapReady:function(e){return!!e.map}},xe=Oe,je={setMap:function(e,n){e.map=n},setDistanceDuration:function(e,n){var t=n.distance,a=n.duration,o=t/1e3;o=Math.round(100*o),o/=100,e.distance=o,e.duration=Math.floor(a/60)},setPlaceMarkers:function(e,n){if(e.map){e.markers.forEach((function(e){return e.remove()})),e.markers=[];for(var t=0,a=n;t<a.length;t++){var o=a[t],r=o.center,i=r[0],c=r[1],u=new(M().Popup)({offset:[0,-25]}).setLngLat([i,c]).setHTML("\n                        <h4>".concat(o.text,"</h4>\n                        <p>").concat(o.place_name_es,"</p>\n                        <p>").concat([i,c],"</p>\n                        "));new(M().Marker)({color:"#0D6EFD",draggable:!0}).setLngLat([i,c]).setPopup(u).addTo(e.map)}}},setRoutePoyline:function(e,n){for(var t,a,o,r,i=n[0],c=n[n.length-1],u=new(M().LngLatBounds)([i[0],i[1]],[c[0],c[1]]),s=0,l=n;s<l.length;s++){var d=l[s],p=[d[0],d[1]];u.extend(p)}null===(t=e.map)||void 0===t||t.fitBounds(u,{padding:300});var f={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:n}}]}};(null===(a=e.map)||void 0===a?void 0:a.getLayer("RouteString"))&&(e.map.removeLayer("RouteString"),e.map.removeSource("RouteString")),null===(o=e.map)||void 0===o||o.addSource("RouteString",f),null===(r=e.map)||void 0===r||r.addLayer({id:"RouteString",type:"line",source:"RouteString",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#0D6EFD","line-width":4}})}},Ce=je,Fe={namespaced:!0,actions:Se,getters:xe,mutations:Ce,state:Be},Ue=Fe,Ie=(0,v.MT)({modules:{places:De,map:Ue}});if(M().accessToken="pk.eyJ1IjoibGNhcmJhbGxvIiwiYSI6ImNsN3B1M3IyMTBhcnUzbnBmdnFmdjR2OHcifQ.9k9OOjEOlFMMbir6XPk05g",!navigator.geolocation)throw alert("Tu navegador o soporta la geoloalización"),new Error("Tu navegador o soporta la geoloalización");(0,a.ri)(d).use(Ie).use(de).mount("#app")}],n={};function t(a){var o=n[a];if(void 0!==o)return o.exports;var r=n[a]={exports:{}};return e[a].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,a,o,r){if(!a){var i=1/0;for(l=0;l<e.length;l++){a=e[l][0],o=e[l][1],r=e[l][2];for(var c=!0,u=0;u<a.length;u++)(!1&r||i>=r)&&Object.keys(t.O).every((function(e){return t.O[e](a[u])}))?a.splice(u--,1):(c=!1,r<i&&(i=r));if(c){e.splice(l--,1);var s=o();void 0!==s&&(n=s)}}return n}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[a,o,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(n,a){return t.f[a](e,n),n}),[]))}}(),function(){t.u=function(e){return"js/about.8a017a0f.js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={},n="maps-app:";t.l=function(a,o,r,i){if(e[a])e[a].push(o);else{var c,u;if(void 0!==r)for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var d=s[l];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==n+r){c=d;break}}c||(u=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,t.nc&&c.setAttribute("nonce",t.nc),c.setAttribute("data-webpack",n+r),c.src=a),e[a]=[o];var p=function(n,t){c.onerror=c.onload=null,clearTimeout(f);var o=e[a];if(delete e[a],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach((function(e){return e(t)})),n)return n(t)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=p.bind(null,c.onerror),c.onload=p.bind(null,c.onload),u&&document.head.appendChild(c)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={143:0};t.f.j=function(n,a){var o=t.o(e,n)?e[n]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise((function(t,a){o=e[n]=[t,a]}));a.push(o[2]=r);var i=t.p+t.u(n),c=new Error,u=function(a){if(t.o(e,n)&&(o=e[n],0!==o&&(e[n]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;c.message="Loading chunk "+n+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,o[1](c)}};t.l(i,u,"chunk-"+n,n)}},t.O.j=function(n){return 0===e[n]};var n=function(n,a){var o,r,i=a[0],c=a[1],u=a[2],s=0;if(i.some((function(n){return 0!==e[n]}))){for(o in c)t.o(c,o)&&(t.m[o]=c[o]);if(u)var l=u(t)}for(n&&n(a);s<i.length;s++)r=i[s],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(l)},a=self["webpackChunkmaps_app"]=self["webpackChunkmaps_app"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(1)}));a=t.O(a)})();
//# sourceMappingURL=app.86635153.js.map